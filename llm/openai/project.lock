create_citation_training:
  cmd: python -m spacy run create_citation_training
  script:
    - python scripts/create_citation_input_for_fine_tuning.py webpages_en_output3
      output/gpt_citation_training.jsonl output/gpt_citation_validation.jsonl -i mongo
      -m localhost -p 27017
  deps: []
  outs:
    - path: output/gpt_citation_training.jsonl
      md5: edd9ab201f38557fd30ddc7ca9595b14
    - path: output/gpt_citation_validation.jsonl
      md5: a74b8565cbc32cc138180cbb231a8c8b
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
upload_files:
  cmd: python -m spacy run upload_files
  script:
    - ./scripts/upload_file_to_openai.sh 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
      output/gpt_citation_training.jsonl output/gpt_citation_training_upload_data.json
    - ./scripts/upload_file_to_openai.sh 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
      output/gpt_citation_validation.jsonl output/gpt_citation_validation_upload_data.json
  deps:
    - path: output/gpt_citation_training.jsonl
      md5: edd9ab201f38557fd30ddc7ca9595b14
    - path: output/gpt_citation_validation.jsonl
      md5: a74b8565cbc32cc138180cbb231a8c8b
  outs:
    - path: output/gpt_citation_training_upload_data.json
      md5: b77482bec3c43ac55ba27816aec3725e
    - path: output/gpt_citation_validation_upload_data.json
      md5: 6713447334a35b9323c6c9c3e97ecad0
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
yo:
  cmd: python -m spacy run yo
  script:
    - echo sup | ls
  deps: []
  outs: []
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
delete_all_files:
  cmd: python -m spacy run delete_all_files
  script:
    - ./scripts/delete_all_openai_files.sh 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
  deps: []
  outs: []
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
create_fine_tune:
  cmd: python -m spacy run create_fine_tune
  script:
    - ./scripts/create_fine_tune.sh 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
      ada output/gpt_citation_training_upload_data.json output/gpt_citation_validation_upload_data.json
      output/fine_tune_job.json
  deps:
    - path: output/gpt_citation_training_upload_data.json
      md5: b77482bec3c43ac55ba27816aec3725e
    - path: output/gpt_citation_validation_upload_data.json
      md5: 6713447334a35b9323c6c9c3e97ecad0
  outs:
    - path: output/fine_tune_job.json
      md5: aee3c4c5e095acffe0294738c6bf7cb5
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
fine_tune_status:
  cmd: python -m spacy run fine_tune_status
  script:
    - ./scripts/fine_tune_status.sh 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
      output/fine_tune_job.json output/fine_tune_job.json
  deps:
    - path: output/fine_tune_job.json
      md5: 2172ec462fcfcd5cec63897ac70177ea
  outs:
    - path: output/fine_tune_job.json
      md5: 2172ec462fcfcd5cec63897ac70177ea
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
fine_tune_stats:
  cmd: python -m spacy run fine_tune_stats
  script:
    - ./scripts/fine_tune_stats.sh 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
      output/fine_tune_job.json output/fine_tune_stats.csv
  deps:
    - path: output/fine_tune_job.json
      md5: cb1f8d2fe5fdcbc4439b07b2acb8263d
  outs:
    - path: output/fine_tune_stats.csv
      md5: 736f5732156f622e4ab859b3b22807c0
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
use_fine_tune:
  cmd: python -m spacy run use_fine_tune
  script:
    - ./scripts/use_fine_tune.sh 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
      output/fine_tune_job.json input/english_citation_input.txt output/fine_tune_completion.json
  deps:
    - path: input/english_citation_input.txt
      md5: 6c11b7e5a82225faebe774fc80b9bfda
    - path: output/fine_tune_job.json
      md5: cb1f8d2fe5fdcbc4439b07b2acb8263d
  outs:
    - path: output/fine_tune_completion.json
      md5: cd4603e4ced4b2516ee6b1b038823303
  spacy_version: 3.2.5
  spacy_git_version: 6e8ab1544
